{"ast":null,"code":"import _classCallCheck from \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"S:\\\\Spring Boot\\\\pptool-react-client1\\\\src\\\\components\\\\Dashboard.js\";\nimport React, { Component } from \"react\";\nimport ProjectItem from \"./Project/ProjectItem\";\nimport CreateProjectButton from \"./Project/CreateProjectButton\";\nimport { connect } from \"react-redux\";\nimport { getProjects } from \"../actions/projectActions\";\nimport PropTypes from \"prop-types\";\nimport Axios from \"axios\";\nvar maxInactive = 100; //10 minutes\n\nvar sessionStart = new Date().getTime() / 1000; //session start-time in seconds\n\nvar sessionActive = sessionStart;\nvar checkTime = 1000; //1-second\n\nfunction postToken() {\n  var str = localStorage.getItem(\"jwtToken\");\n  str = str.substring(7, str.length);\n  console.log(\"Token retrieved: \" + str);\n  Axios.get(\"localhost:8090/api/users/token/\" + str);\n  /*\n  var xhttp = new XMLHttpRequest();\n  xhttp.onreadystatechange = function() {\n    if (this.readyState === 4 && this.status === 200) {\n      document.getElementById(\"demo\").innerHTML = this.responseText;\n    }\n  };\n  xhttp.open(\"GET\", \"localhost:8090/api/users/token/\" + str, true);\n  xhttp.send();\n  */\n\n  console.log(\"API called\");\n}\n\nfunction detectEvents() {\n  var arr = [\"drag\", \"wheel\", \"select\", \"click\", \"auxclick\", \"mousemove\", \"mousedown\", \"mouseup\", \"keydown\", \"keyup\", \"keypress\", \"cut\", \"copy\", \"paste\", \"scroll\", \"compositionupdate\", \"compositionend\", \"compositionstart\", \"submit\"];\n\n  for (var i = 0; i < arr.length; i++) {\n    document.addEventListener(arr[i], resetSessionStartAndActive);\n    postToken();\n    deleteSessionKey();\n  }\n}\n\nfunction resetSessionStartAndActive() {\n  sessionStart = new Date().getTime() / 1000;\n  sessionActive = sessionStart;\n  console.log(\"refreshed\");\n}\n\nfunction checkActivity() {\n  if (sessionActive - sessionStart >= maxInactive) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction deleteSessionKey() {\n  var chk = checkActivity();\n\n  if (chk === true) {\n    localStorage.removeItem(\"jwtToken\");\n    console.log(\"Removed the Authorization-token\"); //redirect the page\n  } else {\n    sessionActive = new Date().getTime() / 1000;\n  }\n}\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dashboard, _Component);\n\n  function Dashboard() {\n    _classCallCheck(this, Dashboard);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).apply(this, arguments));\n  }\n\n  _createClass(Dashboard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getProjects();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var projects = this.props.project.projects;\n      setInterval(detectEvents, checkTime);\n      return React.createElement(\"div\", {\n        className: \"projects\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"display-4 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Projects\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(CreateProjectButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), projects.map(function (project) {\n        return React.createElement(ProjectItem, {\n          key: project.id,\n          project: project,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        });\n      })))));\n    }\n  }]);\n\n  return Dashboard;\n}(Component);\n\nDashboard.propTypes = {\n  project: PropTypes.object.isRequired,\n  getProjects: PropTypes.func.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    project: state.project\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getProjects: getProjects\n})(Dashboard);","map":{"version":3,"sources":["S:\\Spring Boot\\pptool-react-client1\\src\\components\\Dashboard.js"],"names":["React","Component","ProjectItem","CreateProjectButton","connect","getProjects","PropTypes","Axios","maxInactive","sessionStart","Date","getTime","sessionActive","checkTime","postToken","str","localStorage","getItem","substring","length","console","log","get","detectEvents","arr","i","document","addEventListener","resetSessionStartAndActive","deleteSessionKey","checkActivity","chk","removeItem","Dashboard","props","projects","project","setInterval","map","id","propTypes","object","isRequired","func","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ProjectItem from \"./Project/ProjectItem\";\nimport CreateProjectButton from \"./Project/CreateProjectButton\";\nimport { connect } from \"react-redux\";\nimport { getProjects } from \"../actions/projectActions\";\nimport PropTypes from \"prop-types\";\nimport Axios from \"axios\";\n\nconst maxInactive = 100; //10 minutes\nvar sessionStart = new Date().getTime() / 1000; //session start-time in seconds\nvar sessionActive = sessionStart;\nconst checkTime = 1000; //1-second\n\nfunction postToken() {\n  var str = localStorage.getItem(\"jwtToken\");\n  str = str.substring(7, str.length);\n  console.log(\"Token retrieved: \" + str);\n\n  Axios.get(\"localhost:8090/api/users/token/\" + str);\n  /*\n  var xhttp = new XMLHttpRequest();\n  xhttp.onreadystatechange = function() {\n    if (this.readyState === 4 && this.status === 200) {\n      document.getElementById(\"demo\").innerHTML = this.responseText;\n    }\n  };\n  xhttp.open(\"GET\", \"localhost:8090/api/users/token/\" + str, true);\n  xhttp.send();\n  */\n\n  console.log(\"API called\");\n}\n\nfunction detectEvents() {\n  var arr = [\n    \"drag\",\n    \"wheel\",\n    \"select\",\n    \"click\",\n    \"auxclick\",\n    \"mousemove\",\n    \"mousedown\",\n    \"mouseup\",\n    \"keydown\",\n    \"keyup\",\n    \"keypress\",\n    \"cut\",\n    \"copy\",\n    \"paste\",\n    \"scroll\",\n    \"compositionupdate\",\n    \"compositionend\",\n    \"compositionstart\",\n    \"submit\"\n  ];\n\n  for (let i = 0; i < arr.length; i++) {\n    document.addEventListener(arr[i], resetSessionStartAndActive);\n    postToken();\n    deleteSessionKey();\n  }\n}\n\nfunction resetSessionStartAndActive() {\n  sessionStart = new Date().getTime() / 1000;\n  sessionActive = sessionStart;\n  console.log(\"refreshed\");\n}\n\nfunction checkActivity() {\n  if (sessionActive - sessionStart >= maxInactive) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction deleteSessionKey() {\n  var chk = checkActivity();\n  if (chk === true) {\n    localStorage.removeItem(\"jwtToken\");\n    console.log(\"Removed the Authorization-token\");\n    //redirect the page\n  } else {\n    sessionActive = new Date().getTime() / 1000;\n  }\n}\n\nclass Dashboard extends Component {\n  componentDidMount() {\n    this.props.getProjects();\n  }\n\n  render() {\n    const { projects } = this.props.project;\n    setInterval(detectEvents, checkTime);\n    return (\n      <div className=\"projects\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <h1 className=\"display-4 text-center\">Projects</h1>\n              <br />\n              <CreateProjectButton />\n\n              <br />\n              <hr />\n\n              {projects.map(project => (\n                <ProjectItem key={project.id} project={project} />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDashboard.propTypes = {\n  project: PropTypes.object.isRequired,\n  getProjects: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  project: state.project\n});\n\nexport default connect(\n  mapStateToProps,\n  { getProjects }\n)(Dashboard);\n"]},"metadata":{},"sourceType":"module"}